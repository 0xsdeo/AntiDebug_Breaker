<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AntiDebug Breaker</title>
    <link rel="stylesheet" href="popup.css">
</head>

<body>
    <div class="container">
        <header>
            <div class="title-container">
                <!-- 全局/标准模式切换开关 -->
                <div class="mode-switch-container">
                    <label class="mode-switch">
                        <input type="checkbox" id="global-mode-toggle">
                        <span class="mode-slider"></span>
                    </label>
                    <span class="mode-text">标准模式</span>
                    <div class="mode-tooltip">
                        开启标准模式/全局模式<br><br>
                        <strong>标准模式：</strong>插件默认模式，当勾选脚本并刷新网站后，脚本仅会注入到当前网站。<br><br>
                        <strong>全局模式：</strong>当开启全局模式后，勾选的脚本将注入到每个网站中。<br><br>
                        注：对于通过file://协议或localhost访问的页面，必须开启全局模式才能注入脚本。
                    </div>
                </div>

                <h1>AntiDebug</h1>
                <div class="breaker">Breaker</div>
                <a href="https://github.com/0xsdeo/AntiDebug_Breaker" target="_blank" class="github-link">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M12 0C5.374 0 0 5.373 0 12C0 17.302 3.438 21.8 8.207 23.387C8.806 23.498 9 23.126 9 22.81V20.576C5.662 21.302 4.967 19.16 4.967 19.16C4.421 17.773 3.634 17.404 3.634 17.404C2.545 16.659 3.717 16.675 3.717 16.675C4.922 16.759 5.556 17.912 5.556 17.912C6.626 19.746 8.363 19.216 9.048 18.909C9.155 18.134 9.466 17.604 9.81 17.305C7.145 17.001 4.343 15.971 4.343 11.374C4.343 10.063 4.812 8.993 5.579 8.153C5.455 7.85 5.044 6.628 5.696 4.977C5.696 4.977 6.704 4.655 8.997 6.207C9.954 5.941 10.98 5.808 12 5.803C13.02 5.808 14.047 5.941 15.006 6.207C17.297 4.655 18.303 4.977 18.303 4.977C18.956 6.629 18.545 7.851 18.421 8.153C19.191 8.993 19.656 10.064 19.656 11.374C19.656 15.983 16.849 16.998 14.177 17.295C14.607 17.667 15 18.397 15 19.517V22.81C15 23.129 15.192 23.504 15.801 23.386C20.566 21.797 24 17.3 24 12C24 5.373 18.627 0 12 0Z"
                            fill="currentColor" />
                    </svg>
                </a>
            </div>

            <!-- 标签切换栏 -->
            <div class="tabs-container">
                <button class="tab-btn active" data-tab="antidebug">AntiDebug</button>
                <button class="tab-btn" data-tab="hook">Hook</button>
                <button class="tab-btn" data-tab="vue">Vue</button>
            </div>

            <!-- 搜索栏（仅反调试板块显示） -->
            <div class="search-container">
                <!-- Hook板块必看说明 -->
                <div class="hook-notice-container" style="display: none;">
                    <span class="hook-notice-text">必看说明</span>
                    <div class="hook-notice-tooltip">
                        1. 本板块分三类脚本：固定变量脚本、非固定变量脚本、非固定变量+可检索关键字脚本。<br><br>
                        2. 固定变量脚本默认提供一个固定值，修改固定值后需按Enter保存。<br><br>
                        3.
                        非固定变量+可检索关键字脚本开启后，未开启检索关键字功能时会输出所有Hook到的内容；如果开启检索关键字并且设置了关键字仅会Hook输出关键字内容；若开启检索关键字功能但并没有设置关键字时将会输出所有Hook到的内容。<br><br>
                        4. 可检索关键字的功能采取的是模糊检索，也就是说只要传进的内容中包含了检索的关键字就能被hook到。<br><br>
                        5. 开启debugger或stack功能后，如果hook到内容将会触发debugger或打印堆栈信息。<br><br>
                        6. 如果下方没有要用的hook脚本可以提issues，也可以联系我(公众号：Spade sec)，我会考虑是否纳入到后续更新进程中。
                    </div>
                    <!-- Hook板块筛选按钮 -->
                    <div class="hook-filter-buttons">
                        <button class="hook-filter-btn" id="hook-filter-enabled" data-filter="enabled">已开启</button>
                        <button class="hook-filter-btn" id="hook-filter-disabled" data-filter="disabled">未开启</button>
                    </div>
                </div>
                <input type="text" id="search-input" placeholder="Search scripts...">
                <button id="search-btn">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="11" cy="11" r="8"></circle>
                        <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                    </svg>
                </button>
            </div>
        </header>

        <!-- 反调试板块：3列网格 -->
        <div class="scripts-grid">
            <!-- Scripts will be dynamically loaded here -->
        </div>

        <!-- Hook板块 -->
        <div class="hook-content" style="display: none;">
            <!-- Hook板块内容将动态加载 -->
        </div>

        <!-- Vue板块：横向列表 + 路由列表 -->
        <div class="vue-content" style="display: none;">
            <!-- Vue脚本控制列表 -->
            <div class="vue-scripts-list">
                <!-- Vue scripts will be dynamically loaded here -->
            </div>

            <!-- Vue Router 数据显示区 -->
            <div class="vue-router-data">
                <!-- 新增：实例标签页（仅多实例时显示） -->
                <div class="instance-tabs" style="display: none;">
                    <div class="instance-tabs-header">
                        <!-- 动态生成标签按钮 -->
                    </div>
                </div>
                <div class="vue-version-display" style="display: none;">
                    <div class="routes-info"></div>
                    <div>
                        <span class="version-label">Vue 版本：</span>
                        <span class="version-value"></span>
                    </div>
                </div>

                <!-- 新增：Base路径输入（仅检测到base时显示） -->
                <div class="route-base-input-container" style="display: none;">
                    <div class="detected-base-info">
                        <span class="detected-base-label">检测到基础路径：</span>
                        <span class="detected-base-value"></span>
                        <button class="apply-detected-base-btn">应用</button>
                    </div>
                    <div class="custom-base-input-wrapper">
                        <label class="custom-base-label">自定义基础路径：</label>
                        <input type="text" id="custom-base-input" class="custom-base-input"
                            placeholder="留空显示标准路径，如：/admin" />
                        <button class="clear-base-btn">清空</button>
                    </div>
                    <div class="base-hint">💡 输入后实时更新路由列表</div>
                </div>

                <!-- 新增：Vue路由搜索框 -->
                <div class="vue-route-search-container" style="display: none;">
                    <input type="text" id="vue-route-search-input" placeholder="Search routes...">
                    <button id="vue-route-search-btn">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <circle cx="11" cy="11" r="8"></circle>
                            <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                        </svg>
                    </button>
                </div>

                <div class="routes-list-container">
                    <!-- 路由列表将动态加载 -->
                </div>

                <!-- 新增：批量复制按钮 -->
                <div class="routes-actions-footer" style="display: none;">
                    <button class="footer-btn copy-all-paths-btn">复制所有路径</button>
                    <button class="footer-btn copy-all-urls-btn">复制所有URL</button>
                </div>
            </div>
        </div>

        <div class="no-results">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="12" r="10"></circle>
                <line x1="12" y1="8" x2="12" y2="12"></line>
                <line x1="12" y1="16" x2="12.01" y2="16"></line>
            </svg>
            <p>No scripts found matching your search</p>
        </div>

        <footer>
            <div class="signature">By 0xsdeo</div>
            <div class="hint">页面刷新后更改生效</div>
        </footer>
    </div>

    <!-- Toast提示 -->
    <div id="toast" class="toast">
        <div class="toast-message">已保存</div>
    </div>

    <script src="popup.js"></script>
</body>

</html>